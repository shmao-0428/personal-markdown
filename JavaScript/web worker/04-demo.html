<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /** https://juejin.cn/post/6844903496550989837#heading-7 */
        /** http://www.ruanyifeng.com/blog/2018/07/web-worker.html */

        let myWorker = new Worker('./04-demo.js');

        myWorker.onmessage = function (e) {
            var data = e.data;
            console.log('page:', data, data === arr);
            // 重新赋值
            arr = data;
            console.log('arr:', arr, arr === data);
        };

        var arr = {
            a: { name: 1, a: { a: [123, 2] } },
            b: { name: 1 },
            c: { name: 1 },
        }
        myWorker.postMessage(arr);

        // myWorker.terminate() // 终止整个进程

    </script>
</body>

</html>