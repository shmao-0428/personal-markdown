### åˆ›å»ºè‡ªå·±çš„npmåŒ…

##### åœ¨è‡ªå·±çš„ç›®å½•ä¸‹è¿›è¡Œnpm init

![img](https://img2018.cnblogs.com/blog/1123519/201904/1123519-20190416104328203-605495593.png)

nameï¼š
 åŒ…çš„åå­—ï¼Œé»˜è®¤æ˜¯ä½ è¿™ä¸ªæ–‡ä»¶å¤¹çš„åå­—ã€‚å…ˆå»npmä¸Šæ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰åŒåçš„åŒ…ã€‚æœ€å¥½çš„æµ‹è¯•æ–¹å¼å°±æ˜¯ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œé¢è¾“å…¥npm install è¦å–çš„åå­—ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œnpmä¸Šæ²¡æœ‰è·Ÿä½ åŒåçš„åŒ…ï¼ŒæŠŠåŒ…å‘å¸ƒå‡ºå»ã€‚å¦‚æœæˆåŠŸä¸‹è½½ä¸‹æ¥äº†ï¼Œåˆ™ä¸èƒ½å‘å¸ƒã€‚

versionï¼š
 ä½ è¿™ä¸ªåŒ…çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯1.0.0

descriptionï¼š
 åŒ…çš„ä½œç”¨

entry pointï¼š
 å…¥å£æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯Index.jsï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å¡«å†™ä½ è‡ªå·±çš„æ–‡ä»¶å

test commandï¼š
 æµ‹è¯•å‘½ä»¤ï¼Œè¿™ä¸ªç›´æ¥å›è½¦å°±å¥½äº†ï¼Œå› ä¸ºç›®å‰è¿˜ä¸éœ€è¦è¿™ä¸ªã€‚

git repositoryï¼š
 è¿™ä¸ªæ˜¯gitä»“åº“åœ°å€ï¼Œå¦‚æœä½ çš„åŒ…æ˜¯å…ˆæ”¾åˆ°githubä¸Šæˆ–è€…å…¶ä»–gitä»“åº“é‡Œï¼Œè¿™æ—¶å€™ä½ çš„æ–‡ä»¶å¤¹é‡Œé¢ä¼šå­˜åœ¨ä¸€ä¸ªéšè—çš„.gitç›®å½•ï¼Œnpmä¼šè¯»åˆ°è¿™ä¸ªç›®å½•ä½œä¸ºè¿™ä¸€é¡¹çš„é»˜è®¤å€¼ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œç›´æ¥å›è½¦ç»§ç»­ã€‚

keywordï¼š
 è¿™ä¸ªæ˜¯ä¸€ä¸ªé‡ç‚¹ï¼Œè¿™ä¸ªå…³ç³»åˆ°æœ‰å¤šå°‘äººä¼šæœåˆ°ä½ çš„npmåŒ…ã€‚

authorï¼šå†™ä½ çš„è´¦å·æˆ–è€…ä½ çš„githubè´¦å·å§

licenseï¼šè¿™ä¸ªç›´æ¥å›è½¦ï¼Œå¼€æºæ–‡ä»¶æ¥ç€ã€‚ã€‚ã€‚

##### å»ºç«‹srcæ–‡ä»¶å¤¹ï¼Œå¹¶å»ºç«‹index.js

æ³¨æ„ç›®å½•ç»“æ„å…¥ä¸‹
 -package.json
 -package-lock.json
 -src/index.js
 -node_module[å¦‚æœæ²¡æœ‰å¼•å…¥åŒ…ç­‰å°±ä¸ä¼šäº§ç”Ÿè¯¥æ–‡ä»¶å¤¹]



**å‘å¸ƒnpmåŒ…**

ã€€ã€€1. åˆ° https://www.npmjs.com æ³¨å†Œä¸€ä¸ªè´¦å·

ã€€ã€€2. è¿›å…¥ä½ çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œ **npm login**

ã€€ã€€  ä¼šè¾“å…¥ä½ çš„ç”¨æˆ·åã€å¯†ç å’Œé‚®ç®±

ã€€ã€€3. ç™»å½•æˆåŠŸåï¼Œæ‰§è¡Œ **npm publish**ï¼Œå°±å‘å¸ƒæˆåŠŸå•¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜ç½‘çœ‹åˆ°

![image-20200821222058249](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200821222058249.png)

### å‘å¸ƒæ—¶é‡åˆ°çš„é—®é¢˜

1ã€å‡ºç°è¿™ä¸ªé”™è¯¯ no_perms Private mode enable, only admin can publish this module

é”™è¯¯è¾“å‡ºå†…å®¹

```js
npm ERR! publish Failed PUT 403
npm ERR! code E403
npm ERR! no_perms Private mode enable, only admin can publish this module:
```

å‡ºç°åŸå› ï¼šä½¿ç”¨çš„æ˜¯æ·˜å®æºcnpm,ç™»é™†åˆ°çš„æ˜¯cnpm

è§£å†³æ–¹æ³•ï¼šåˆ‡æ¢åˆ°npmjsçš„ç½‘å€ï¼Œä»£ç å¦‚ä¸‹

```javascript
npm config set registry http://registry.npmjs.org/

æ·˜å®é•œåƒ:
npm config set registry https://registry.npm.taobao.org
```

2ã€You do not have permission to publish "npmtest". Are you logged in as the correct user? 

é”™è¯¯è¾“å‡ºå†…å®¹

```js
npm ERR! publish Failed PUT 403
npm ERR! code E403
npm ERR! You do not have permission to publish "npmtest". Are you logged in as the correct user? :
```

å‡ºç°åŸå› ï¼šæ‰€è¦publishçš„åŒ…çš„nameå’Œnpmjsç½‘ä¸Šå·²ç»å‘å¸ƒçš„åŒ…çš„åå­—é‡å¤ï¼Œæ‰€ä»¥æ”¶ä½ æ²¡æœ‰æƒé™å‘å¸ƒè¿™ä¸ªåå­—çš„åŒ…ã€‚ï¼ˆç®€å•è§£é‡Šå°±æ˜¯ä½ æƒ³è¦çš„åå­—è¢«åˆ«äººæŠ¢å…ˆæ³¨å†Œäº†ï¼‰

è§£å†³æ–¹æ³•ï¼šæ‰¾åˆ°package.jsonæ–‡ä»¶ï¼ŒæŠŠnameçš„å€¼æ¢æ‰ã€‚å¦‚æœè¿˜å‡ºç°ä¸Šè¿°é”™è¯¯å°±æ˜¯è¿˜æ˜¯é‡åçš„ï¼Œç»§ç»­æ¢ï¼

3  æœªç™»å½•

![image-20200821222500225](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200821222500225.png)



ç™»å½•ä¸€ä¸‹ æœ€åæˆåŠŸäº†

![image-20200821222522944](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200821222522944.png)

## åˆ é™¤å‘å¸ƒçš„åŒ…

åˆ é™¤24å°æ—¶å†…å‘å¸ƒçš„åŒ…

```cpp
npm unpublish --force 
```

åˆ é™¤æŒ‡å®šåç§°çš„åŒ…

```cpp
npx force-unpublish package-name 'åˆ é™¤åŸå› ' //
```

**åˆ é™¤**

![image-20200821232436824](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200821232436824.png)



**å·²ç»æœç´¢ä¸åˆ°äº†**

![image-20200821232514279](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200821232514279.png)

Terminalæ‰“å°

```cpp
ğŸ”¥ Unpublishing antd-ng-li...
+ npm (antd-ng-li)
npm ERR! owner mutate Error getting user data for $(npm
npm ERR! code E404
npm ERR! 404 Not Found - GET http://registry.npmjs.org/-/user/org.couchdb.user:%24(npm
ğŸ‰ Done.

D:\HC\webstorm\ng-antd-cli>

```

åˆ°ç½‘é¡µæŸ¥çœ‹ä»å¯ä»¥çœ‹åˆ°è¯¥åŒ…åï¼Œä½†æ˜¯ç‚¹å‡»åäº§çœ‹å¯ä»¥çœ‹åˆ°å·²åˆ é™¤ä¿¡æ¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20191122163032514.png)
å‘å¸ƒæˆåŠŸåï¼Œä¸ºäº†ä¹‹åä½¿ç”¨æ–¹ä¾¿å¯ä»¥ç»§ç»­è®¾ç½®npmä»£ç†é•œåƒ

```cpp
npm config set registry=https://registry.npm.taobao.org
```

## npmæ›´æ–°

æ‰€è°“çš„æ›´æ–°ï¼Œå…¶å®å°±æ˜¯å†æ¬¡å‘å¸ƒ

```cpp
npm publish
```

Terminalæ‰“å°

æŠ¥é”™ä¿¡æ¯

```cpp
npm ERR! code E403
npm ERR! 403 403 Forbidden - PUT http://registry.npmjs.org/xxx-xxx - 
You cannot publish over the previously published versions: 2.0.0.
npm ERR! 403 In most cases, you or one of your dependencies are requesting
npm ERR! 403 a package version that is forbidden by your security policy
```

æ¯æ¬¡æ›´æ–°çš„æ—¶å€™éœ€è¦æ”¹å˜package.jsonä¸­çš„ç‰ˆæœ¬å·
é‡æ–°å‘å¸ƒï¼ŒOKäº†

## å†æ¬¡ç™»é™†æŠ¥é”™

`error Unexpected end of JSON input while parsing near ''`
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20191126162645353.jpg)
è§£å†³æ–¹æ¡ˆ

```cpp
npm cache clean --force
npm cache verify
```